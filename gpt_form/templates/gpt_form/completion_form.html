<form id="completion_form" onsubmit="complete(event)">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Submit</button>
</form>
<textarea id="result" rows="20" cols="50"></textarea>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  function complete(event) {
    event.preventDefault();

    const url = "{% url 'gpt_form:complete' %}";
    const form = document.getElementById("completion_form");
    const textarea = document.getElementById("result");

    const formData = new FormData(form);

    axios.post(url, formData)
    .then(response => {
      textarea.value = response.data.choices[0].text.trim();
    })
    .catch(error => console.error(error));
  }
</script>
